.audio-visualizer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 0;
  pointer-events: none;
  /* CSS glow effect to simulate bloom - uses CSS variable set by BloomController */
  filter: blur(0.5px) brightness(calc(1 + var(--bloom-intensity, 0.1)));
}

.audio-visualizer canvas {
  display: block;
}

/* Transition for opacity changes during mode switching */
.audio-visualizer {
  transition: filter 0.1s ease;
}

/* Subtle animation when not playing */
.audio-visualizer.idle {
  opacity: 0.4;
  filter: blur(0.5px) brightness(1.05);
}

/* Full visibility when playing */
.audio-visualizer.playing {
  opacity: 1;
}

/* Mobile: hide visualizer for performance */
@media (max-width: 768px) {
  .audio-visualizer {
    display: none;
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .audio-visualizer {
    display: none;
  }
}

/* Dark mode enhanced visualizer - Deep Space theme */
.audio-visualizer.dark-mode-enhanced {
  filter: blur(0px) brightness(calc(1.15 + var(--bloom-intensity, 0.2)));
}

.audio-visualizer.dark-mode-enhanced.idle {
  opacity: 0.7;
  filter: blur(0px) brightness(1.1);
}

.audio-visualizer.dark-mode-enhanced.playing {
  opacity: 1;
  filter: blur(0px) brightness(calc(1.2 + var(--bloom-intensity, 0.3)));
}

/* Cosmic vignette overlay for dark mode */
.audio-visualizer.dark-mode-enhanced::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 50%,
    rgba(59, 7, 100, 0.15) 100%
  );
  pointer-events: none;
}

/* Show simplified visualizer on mobile in dark mode */
@media (max-width: 768px) {
  .audio-visualizer.dark-mode-enhanced {
    display: block;
    opacity: 0.5;
  }
}
